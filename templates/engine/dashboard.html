{% extends "base.html" %}
{% block content %}


<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">



<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

<script src="{{ url_for(".static", filename="js/meteogram.js") }}"></script>





<div id="dashboard">

		<div class="alert alert-danger alert-dismissible fade in" role="alert">
		  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">&times;</span>
			<span class="sr-only">Close</span>
		  </button>
		  <strong>Alert - </strong> Sensor 4 went outside specified range <strong>5 times</strong> from 13:22 14.09.2015 to 14:00 14.09.2015
		</div>

        <div class="box">
            <div class="box-header">
                <span>Weather</span>
            </div>
            <div class="box-content">


            	<hr>	Would be cool to have dropdown for city, then a form of selct time period	<hr>

				<div id="container" style="width: 800px; height: 310px; margin: 0 auto">
					<div style="margin-top: 100px; text-align: center" id="loading">
						<i class="fa fa-spinner fa-spin"></i> Loading data from external source
					</div>
				</div>
            </div>
        </div>

        <div class="box mynodes">
            <div class="box-header">
                <span>Function 2</span>
            </div>
            <div class="box-content">

		<div id="Comparison" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
            </div>
        </div>

        <div class="box network">
            <div class="box-header">
                <span>RPI Temperature</span>
            </div>
            <div class="box-content">
				<div id="graphdiv" style="width:750px; height:400px;"></div>

            </div>
        </div>

<script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
<script type="text/javascript">

  function addZero(num)
  {
    var s=num+"";
    if (s.length < 2) s="0"+s;
    return s;
  }

  function dateFormat(indate)
  {
    var hh = addZero(indate.getHours());
    var MM = addZero(indate.getMinutes());
    //var ss = addZero(indate.getSeconds());
    var dd = addZero(indate.getDate());
    var mm = addZero(indate.getMonth()+1);
    var yyyy = addZero(indate.getFullYear());
    return dd+'/'+mm+' '+hh+':'+MM;
  }

  g = new Dygraph(
    document.getElementById("graphdiv"),
    "{{ url_for(".static", filename="data/temperature_log.txt") }}",
    {
      xValueParser: function(x) {
        var date = new Date(x.replace(
          /^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)$/,
          '$4:$5:$6 $2/$3/$1'
        ));
        return date.getTime();
      },
      axes: {
        x: {
          ticker: Dygraph.dateTicker,
          axisLabelFormatter: function(x) {
            return dateFormat(new Date(x));
          },
          valueFormatter: function(x) {
            return dateFormat(new Date(x));
          }
        }
      },
      labelsDivWidth: 310,
      rollPeriod: 30,
      strokeWidth: 2.0,
      labels: ['Date','Humidity (%)','Temp (&deg;C)']
    }
  );
</script>



        <div class="box network">
            <div class="box-header">
                <span>RPI Temperature</span>
            </div>
            <div class="box-content">
				<div id="graphdiv" style="width:750px; height:400px;"></div>

            </div>
        </div>
<!--
        <div class="box disks">
		            <div class="box-header">
		                <span>Disks</span>
		            </div>
		            <div class="box-content">

		            </div>
		        </div>
		        <div class="box swap">
		            <div class="box-header">
		                <span>Swap</span>
		            </div>
		            <div class="box-content">

		            </div>
		        </div>
		        <div class="box users">
		            <div class="box-header">
		                <span>Users</span>
		            </div>
		            <div class="box-content">

		            </div>
        </div>

 -->

 </div>




{% endblock %}